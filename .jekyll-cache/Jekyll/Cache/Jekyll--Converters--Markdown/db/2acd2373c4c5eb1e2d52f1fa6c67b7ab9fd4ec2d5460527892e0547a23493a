I"µY<h2 id="jekyll-blog-ì—ì„œ-threejs-ë¥¼-ì¨ë³´ì">jekyll blog ì—ì„œ Three.js ë¥¼ ì¨ë³´ì!</h2>

<h3 id="ì´-ê¸€ì˜-ëŒ€ìƒ-">ì´ ê¸€ì˜ ëŒ€ìƒ :</h3>
<ol>
  <li>jekyll blogì— <strong>OpenGL Shader</strong> ê²°ê³¼ë¥¼ ë°”ë¡œë°”ë¡œ ì˜¬ë¦¬ê³  ì‹¶ë‹¤. (ì´ë¯¸ jekyll blogë¥¼ ê°€ì§€ê³  ìˆë‹¤.)</li>
  <li><strong>javascriptëŠ” í•˜ë‚˜ë„ ëª¨ë¥´ëŠ”</strong> ê·¸ë˜í”½ìŠ¤ í”„ë¡œê·¸ë˜ë¨¸</li>
  <li>ì¸ìŠ¤íƒ€ê·¸ë¨ì´ë‚˜ í•€í„°ë ˆìŠ¤íŠ¸ì²˜ëŸ¼, <strong>ë‚´ê°€ ë§Œë“  ì‰ì´ë”ë¥¼ ì•„ì¹´ì´ë¹™ í•˜ê³  ì‹¶ë‹¤.</strong></li>
</ol>

<h3 id="ì´-ê¸€ì˜-ëª©í‘œ-">ì´ ê¸€ì˜ ëª©í‘œ :</h3>
<ol>
  <li>jekyll blogì—ì„œ <strong>three.jsë¥¼ ì‚¬ìš©í•´ì„œ 3D scene</strong>ì„ ê·¸ë¦°ë‹¤.</li>
  <li>3D sceneì— <strong>ë‚´ê°€ ë§Œë“  ì»¤ìŠ¤í…€ glsl shaderë¥¼ ì‚¬ìš©</strong>í•œë‹¤.</li>
</ol>

<h3 id="ëª©ì°¨-">ëª©ì°¨ :</h3>
<ol>
  <li>html ìˆ˜ì •í•˜ê¸° (canvas ì‚¬ìš©í•˜ê¸°)</li>
  <li>three.jsë¥¼ ì‚¬ìš©í•˜ëŠ” javascript ë§Œë“¤ê¸°</li>
  <li>custom shader ë¶™ì´ê¸°</li>
</ol>

<p>ì•ˆë…•í•˜ì„¸ìš”.<br />
ì´ë²ˆ í¬ìŠ¤íŒ…ì€ three.jsë¥¼ ì´ìš©í•´ì„œ glsl shaderë¥¼ ì´ìš©í•œ 3D scene í¬ìŠ¤íŒ…ì„ ë§Œë“œëŠ” ë²•ì— ëŒ€í•œ ë‚´ìš©ì…ë‹ˆë‹¤.</p>

<p>ì·¨ì—… ì¤€ë¹„ë¥¼ í•˜ë©´ì„œ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë§Œë“¤ê³  ìˆëŠ”ë°, ë§¤ë²ˆ ìƒˆë¡œìš´ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë§Œë“œëŠ”ê²Œ ì–´ë µë”ë¼êµ¬ìš”.
ê²Œë‹¤ê°€ ê·¸ë˜í”½ìŠ¤ ìª½ì´ë©´ Visual ì ì¸ ë¶€ë¶„ì„ gif ë‚˜ videoë¡œ ë³´ì—¬ì¤˜ì•¼í•˜ëŠ” ê²½ìš°ë„ ë§ì€ë° ìš©ëŸ‰ ì¤„ì´ëŠ” ê²ƒë„ ë§Œë§Œì¹˜ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>

<p>ê·¸ë˜ì„œ <strong>ë¸”ë¡œê·¸ì— ì´ëŸ° shader ê²°ê³¼ë¥¼ ë°”ë¡œ ë³´ì—¬ì¤„ ìˆ˜ ìˆìœ¼ë©´ í›¨ì”¬ ì¢‹ì§€ ì•Šì„ê¹Œ?</strong> ì‹¶ì–´ì„œ ì‹œë„í•˜ê²Œ ë˜ì—ˆê³ , ì œê°€ ì‹œë„í•œ ê²°ê³¼ë¥¼ ì •ë¦¬í•˜ëŠ” í¬ìŠ¤íŒ…ì„ ì˜¬ë¦¬ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>

<h3 id="1-html-ìˆ˜ì •í•˜ê¸°-canvas-ì‚¬ìš©í•˜ê¸°">1. html ìˆ˜ì •í•˜ê¸° (canvas ì‚¬ìš©í•˜ê¸°)</h3>

<p>ì²« ë²ˆì§¸ëŠ” htmlìˆ˜ì •ì…ë‹ˆë‹¤. ìš°ì„  ì œê°€ ì‚¬ìš©í•˜ëŠ” blog themeì€ ì´ linkì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
<a href="https://github.com/jeffreytse/jekyll-theme-yat">https://github.com/jeffreytse/jekyll-theme-yat</a></p>

<p>jekyll blogëŠ” íŠ¹ì • markdownì„ ì½ì–´ì„œ postë¡œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. íŠ¹ì • mdë¼ëŠ” ê±´ ì•„ë˜ì™€ ê°™ì€ í¬ë§·ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” mdë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: post
title:  "jekyllì—ì„œ three.jsë¥¼ ì¨ë³´ì!"
date:   2021-01-17 00:12:00 +0900
categories: ThreeJS
tags: [three]
---
</code></pre></div></div>

<p>ì—¬ê¸°ì„œ layout í‚¤ì›Œë“œê°€ ì¤‘ìš”í•œë°ìš”, ì œê°€ ì´í•´í•˜ê¸°ë¡œëŠ” layoutì— ë“±ë¡ëœ html ì•„ë˜ì— markdown ë‚´ìš©ì„ ì¶”ê°€í•˜ëŠ” ê²ƒìœ¼ë¡œ ì´í•´í–ˆìŠµë‹ˆë‹¤. <br />
ê·¸ëŸ¼ ì´ â€˜postâ€™ë¥¼ ìˆ˜ì •í•´ì„œ, three.jsë¡œ ë§Œë“¤ 3d sceneì„ ê·¸ë ¤ì¤„ ë¶€ë¶„ì„ ì¶”ê°€í•˜ë©´ í¬ìŠ¤íŠ¸ ì•ˆì— 3d sceneì„ ê·¸ë¦´ ìˆ˜ ìˆë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.</p>

<p><img src="/assets/images/ThreeJS/2021-01-17-configuration/01.png" alt="01" /></p>
<center>(post.html)</center>
<p><br /></p>

<p>ì´ê²Œ ì›ë³¸ â€˜post.htmlâ€™ì˜ ëª¨ìŠµì…ë‹ˆë‹¤.</p>

<p>ì´ì œ ì´ postë¥¼ ì´ìš©í•´ì„œ <strong>â€˜glpostâ€™</strong>ë¼ëŠ” ê±¸ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.</p>

<p><img src="/assets/images/ThreeJS/2021-01-17-configuration/02.png" alt="02" /></p>
<center>(glpost.html)</center>
<p><br /></p>

<p>ê°„ë‹¨í•˜ê²Œ â€˜canvasâ€™ë¥¼ ì¶”ê°€í•˜ê³ , widthì™€ heightë¥¼ ì§€ì •í•´ì£¼ì—ˆìŠµë‹ˆë‹¤. <strong>ì´ì œ ì´ê±¸ js ì•ˆì—ì„œ ì½ì–´ì„œ three.jsê°€ renderí•˜ê²Œ í•˜ë©´ ëì…ë‹ˆë‹¤.</strong></p>

<h3 id="2-threejsë¥¼-ì‚¬ìš©í•˜ëŠ”-javascript-ë§Œë“¤ê¸°">2. three.jsë¥¼ ì‚¬ìš©í•˜ëŠ” javascript ë§Œë“¤ê¸°</h3>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//https://threejs.org/docs/#manual/en/introduction/Installation</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">THREE</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">https://unpkg.com/three@0.124.0/build/three.module.js</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">promise_vs</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://</span><span class="dl">'</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">host</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/assets/glsls/TestJS/vs.vert/</span><span class="dl">'</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">());</span>
<span class="kd">const</span> <span class="nx">promise_fs</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://</span><span class="dl">'</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">host</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/assets/glsls/TestJS/fs.frag/</span><span class="dl">'</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">());</span>

<span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
    <span class="nx">promise_vs</span><span class="p">,</span>
    <span class="nx">promise_fs</span>
    <span class="p">]).</span><span class="nx">then</span><span class="p">(([</span><span class="nx">vs</span><span class="p">,</span> <span class="nx">fs</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="nx">main</span><span class="p">(</span><span class="nx">vs</span><span class="p">,</span><span class="nx">fs</span><span class="p">)</span>
<span class="p">);</span>

<span class="kd">var</span> <span class="nx">renderer</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">uniform</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">scene</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">camera</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">clock</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">main</span><span class="p">(</span><span class="nx">vs</span><span class="p">,</span> <span class="nx">fs</span><span class="p">){</span>
    <span class="kd">const</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#canvas</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">({</span><span class="nx">canvas</span><span class="p">});</span>

    <span class="kd">const</span> <span class="nx">fov</span> <span class="o">=</span> <span class="mi">75</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">aspect</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>  <span class="c1">// the canvas default</span>
    <span class="kd">const</span> <span class="nx">near</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">far</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    <span class="nx">camera</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">PerspectiveCamera</span><span class="p">(</span><span class="nx">fov</span><span class="p">,</span> <span class="nx">aspect</span><span class="p">,</span> <span class="nx">near</span><span class="p">,</span> <span class="nx">far</span><span class="p">);</span>
    <span class="nx">camera</span><span class="p">.</span><span class="nx">position</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

    <span class="nx">scene</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Scene</span><span class="p">();</span>
    <span class="nx">clock</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Clock</span><span class="p">();</span>

    <span class="kd">const</span> <span class="nx">boxWidth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">boxHeight</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">boxDepth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">const</span> <span class="nx">geometry</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">BoxGeometry</span><span class="p">(</span><span class="nx">boxWidth</span><span class="p">,</span> <span class="nx">boxHeight</span><span class="p">,</span> <span class="nx">boxDepth</span><span class="p">);</span>

    <span class="nx">uniform</span> <span class="o">=</span> <span class="p">{</span> <span class="na">time</span><span class="p">:</span> <span class="p">{</span> <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">f</span><span class="dl">"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="mf">1.0</span> <span class="p">}}</span>

    <span class="kd">const</span> <span class="nx">material</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">ShaderMaterial</span><span class="p">(</span> <span class="p">{</span>
    <span class="na">uniforms</span> <span class="p">:</span> <span class="nx">uniform</span><span class="p">,</span>
    <span class="na">vertexShader</span><span class="p">:</span> <span class="nx">vs</span><span class="p">,</span>
    <span class="na">fragmentShader</span><span class="p">:</span> <span class="nx">fs</span>
    <span class="p">}</span> <span class="p">);</span>

    <span class="kd">const</span> <span class="nx">cube</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">Mesh</span><span class="p">(</span><span class="nx">geometry</span><span class="p">,</span> <span class="nx">material</span><span class="p">);</span>
    <span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">cube</span><span class="p">);</span>

    <span class="nx">render</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">render</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">render</span><span class="p">)</span>
    <span class="nx">uniform</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">clock</span><span class="p">.</span><span class="nx">getElapsedTime</span><span class="p">();</span>
    <span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">scene</span><span class="p">,</span> <span class="nx">camera</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ì œê°€ ì‚¬ìš©í•œ javascript ì…ë‹ˆë‹¤. ë¶€ë¶„ë³„ë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//https://threejs.org/docs/#manual/en/introduction/Installation</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">THREE</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">https://unpkg.com/three@0.124.0/build/three.module.js</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div></div>

<p>ë¨¼ì € three.js ëª¨ë“ˆì„ ê°€ì ¸ì˜¤ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤. ìœ„ì˜ ì£¼ì„ ë§í¬ì—ì„œ moduleì„ ë°”ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ìœ¼ë©´ unpkg ì—ì„œ moduleì„ ê°€ì ¸ì˜¤ë¼ê³  í•´ì„œ ë°”ë¡œ ì ìš©í–ˆìŠµë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">promise_vs</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://</span><span class="dl">'</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">host</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/assets/glsls/TestJS/vs.vert/</span><span class="dl">'</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">());</span>
<span class="kd">const</span> <span class="nx">promise_fs</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://</span><span class="dl">'</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">host</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/assets/glsls/TestJS/fs.frag/</span><span class="dl">'</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">());</span>

<span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
    <span class="nx">promise_vs</span><span class="p">,</span>
    <span class="nx">promise_fs</span>
    <span class="p">]).</span><span class="nx">then</span><span class="p">(([</span><span class="nx">vs</span><span class="p">,</span> <span class="nx">fs</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="nx">main</span><span class="p">(</span><span class="nx">vs</span><span class="p">,</span><span class="nx">fs</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>
<p>ì´ ë¶€ë¶„ì€ ì•„ë˜ì—ì„œ ìì„¸í•˜ê²Œ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">main</span><span class="p">(</span><span class="nx">vs</span><span class="p">,</span> <span class="nx">fs</span><span class="p">){</span>
    <span class="kd">const</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#canvas</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">({</span><span class="nx">canvas</span><span class="p">});</span>
    <span class="c1">//...</span>

    <span class="kd">const</span> <span class="nx">material</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">ShaderMaterial</span><span class="p">(</span> <span class="p">{</span>
    <span class="na">uniforms</span> <span class="p">:</span> <span class="nx">uniform</span><span class="p">,</span>
    <span class="na">vertexShader</span><span class="p">:</span> <span class="nx">vs</span><span class="p">,</span>
    <span class="na">fragmentShader</span><span class="p">:</span> <span class="nx">fs</span>
    <span class="p">}</span> <span class="p">);</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">render</span><span class="p">)</span>
    <span class="nx">uniform</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">clock</span><span class="p">.</span><span class="nx">getElapsedTime</span><span class="p">();</span>
    <span class="nx">renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">scene</span><span class="p">,</span> <span class="nx">camera</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ë‚˜ë¨¸ì§€ ë¶€ë¶„ì€ three.js ê¸°ì´ˆì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤. <a href="https://threejs.org/docs/#manual/en/introduction/Creating-a-scene">https://threejs.org/docs/#manual/en/introduction/Creating-a-scene</a> canvasë¥¼ ê°€ì ¸ì˜¤ê³ , sceneì„ êµ¬ì„±í•˜ëŠ” geometryì™€ geometryë¥¼ ê·¸ë¦´ materialì„ ì„¤ì •í•´ ì¤ë‹ˆë‹¤.</p>

<p>ì—¬ê¸°ì„œ í¬ì¸íŠ¸ëŠ” glslë¡œ ì»¤ìŠ¤í…€í•œ shaderë¥¼ ê·¸ë¦¬ëŠ” ê²ƒì´ ëª©ì ì´ê¸°ì— THREE.ShaderMaterial ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. 
ShaderMaterialì€ <a href="http://blog.302chanwoo.com/2016/08/shadermaterial1/
https://medium.com/@sidiousvic/how-to-use-shaders-as-materials-in-three-js-660d4cc3f12a">http://blog.302chanwoo.com/2016/08/shadermaterial1/
https://medium.com/@sidiousvic/how-to-use-shaders-as-materials-in-three-js-660d4cc3f12a
</a> ì—¬ê¸°ì„œ ì°¸ê³ í•´ì„œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.</p>

<h3 id="3-custom-shader-ë¶™ì´ê¸°">3. custom shader ë¶™ì´ê¸°</h3>

<p>ë§ˆì§€ë§‰ ë¶€ë¶„ì…ë‹ˆë‹¤.<br />
ì œê°€ ì›í–ˆë˜ ê²ƒì€ glsl shaderë¥¼ jsì•ˆì— stringìœ¼ë¡œ ë‘ëŠ”ê²Œ ì•„ë‹ˆë¼ ë³„ë„ì˜ íŒŒì¼ë¡œ ê´€ë¦¬í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.
<img src="/assets/images/ThreeJS/2021-01-17-configuration/03.png" alt="03" /></p>
<center>(vs code pluginì¤‘ í•˜ë‚˜ì¸ GLSL Lint)</center>
<p><br /></p>

<p>ê°€ì¥ í° ì´ìœ ëŠ” <strong>syntax highlighting</strong> ì´ì—ˆëŠ”ë°ìš”, GLSL Lintê°€ js ì•ˆì˜ string literalì—ë„ glsl ì˜¤ë¥˜ ê²€ì‚¬ë¥¼ ì§€ì›í•´ì£¼ê¸´ í•˜ì§€ë§Œ, highlightingì´ ì œëŒ€ë¡œ ì•ˆë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.</p>

<p><img src="/assets/images/ThreeJS/2021-01-17-configuration/04.png" alt="04" /></p>
<center>(vs.vert)</center>
<p><br /></p>

<p>ìœ„ì™€ ê°™ì´ ë”°ë¡œ íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ë©´ ìƒ‰ê¹”ì´ ì œëŒ€ë¡œ ë“¤ì–´ê°€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>

<p>í•˜ì§€ë§Œ ì´ë ‡ê²Œ ë”°ë¡œ íŒŒì¼ì„ ë§Œë“¤ë©´ js ì—ì„œ local file readë¥¼ í•˜ê±°ë‚˜ í•´ì•¼í•˜ëŠ”ë°, c/cpp, c# ìœ„ì£¼ í”„ë¡œê·¸ë˜ë°ì„ í–ˆë˜ ì €ë¡œì„œëŠ” jsì—ì„œ local file readë¥¼ í•˜ëŠ”ê²Œ ì–¼ë§ˆë‚˜ ì–´ë ¤ìš´ì§€, ì´ìƒí•œ ì¼ì¸ì§€ ì˜ ëª°ëìŠµë‹ˆë‹¤. (file I/O ê°€ ì–´ë ¤ìš´ ì–¸ì–´ë¼ë‹ˆ..)</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">promise_vs</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://</span><span class="dl">'</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">host</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/assets/glsls/TestJS/vs.vert/</span><span class="dl">'</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">());</span>
<span class="kd">const</span> <span class="nx">promise_fs</span> <span class="o">=</span> <span class="nx">fetch</span><span class="p">(</span><span class="k">new</span> <span class="nx">Request</span><span class="p">(</span><span class="dl">'</span><span class="s1">http://</span><span class="dl">'</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">host</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/assets/glsls/TestJS/fs.frag/</span><span class="dl">'</span><span class="p">)).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">text</span><span class="p">());</span>

<span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">([</span>
    <span class="nx">promise_vs</span><span class="p">,</span>
    <span class="nx">promise_fs</span>
    <span class="p">]).</span><span class="nx">then</span><span class="p">(([</span><span class="nx">vs</span><span class="p">,</span> <span class="nx">fs</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="nx">main</span><span class="p">(</span><span class="nx">vs</span><span class="p">,</span><span class="nx">fs</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>

<p>ê·¸ë˜ì„œ ìœ„ì™€ ê°™ì´ promise ê¸°ë°˜ìœ¼ë¡œ assetsì•ˆì˜ íŒŒì¼ì„ ì½ê³ , ì½ì€ í›„ì— render ë¶€ë¶„ì´ ëŒì•„ê°€ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ì¶”í›„ì— fbxë‚˜ png íŒŒì¼ì„ ì‚¬ìš©í•´ë„ ê°™ì€ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>

<p>ì œ ë¸”ë¡œê·¸ì˜ í¬ìŠ¤íŒ… ì¤‘ <strong>â€˜TestJSâ€™ í¬ìŠ¤íŒ…</strong>ì—ì„œ ëª¨ë“  ê²°ê³¼ê°€ ì ìš©ëœ ëª¨ìŠµì„ í™•ì¸í•˜ì‹¤ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë‹¤ë©´ ë‚¨ê²¨ì£¼ì„¸ìš”!<br />
ê°ì‚¬í•©ë‹ˆë‹¤.</p>
:ET