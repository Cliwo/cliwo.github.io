I"Æ(<h2 id="ê³µê°„-ë³€í™˜">ê³µê°„ ë³€í™˜</h2>

<blockquote>
  <p><strong>Vertex Shaderì˜ â€˜ì…ë ¥ Vertexâ€™ì˜ Spaceë¥¼ NDC Spaceë¡œ ë°”ê¿”ì£¼ëŠ” ê³¼ì •.</strong> ì…ë ¥ì´ Object Spaceìƒì˜ Vertex ì´ë©´, MVP ë³€í™˜ì„ ë‹¤ í•´ì¤˜ì•¼í•œë‹¤. ë‹¨, ì›ë˜ NDC Spaceìƒì˜ ì…ë ¥ì´ë©´ ì•„ë¬´ ë³€í™˜ë„ í•„ìš” ì—†ì„ ìˆ˜ ìˆë‹¤.</p>
</blockquote>

<p>ì°¸ê³  : <a href="http://www.opengl-tutorial.org/kr/beginners-tutorials/tutorial-3-matrices/#%EB%AA%A8%EB%8D%B8-%EB%B7%B0-%ED%94%84%EB%A1%9C%EC%A0%9D%EC%85%98-%ED%96%89%EB%A0%AC">http://www.opengl-tutorial.org/kr/beginners-tutorials/tutorial-3-matrices/#%EB%AA%A8%EB%8D%B8-%EB%B7%B0-%ED%94%84%EB%A1%9C%EC%A0%9D%EC%85%98-%ED%96%89%EB%A0%AC</a></p>

<h3 id="ì¤‘ìš”í•œ-ì´ìœ ">ì¤‘ìš”í•œ ì´ìœ </h3>

<p>ê·¸ë˜í”½ìŠ¤ í”„ë¡œê·¸ë˜ë°ì„ í•˜ë©´ì„œ ë‹¤ì–‘í•œ ìš”êµ¬ì‚¬í•­ì„ <strong>ì´ Matrixë¥¼ ì¡°ì ˆí•˜ëŠ” ê²ƒìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong><br />
ex)</p>
<ul>
  <li>Billboard</li>
  <li>Screen Space Particle</li>
  <li>Render Texture (Render Textureì˜ ì¤‘ìš” ê°œë…ì€ ê³µê°„ ë³€í™˜ê³¼ëŠ” ê±°ë¦¬ê°€ ë©€ì§€ë§Œ, ê³µê°„ ë³€í™˜ì˜ ì´í•´ê°€ í•„ìš”í•˜ë‹¤.)</li>
  <li>ë“±ë“±..</li>
</ul>

<p>ë˜í•œ Shading ì—ì„œë„ Vector, Vertexì˜ ì—°ì‚°ì—ì„œë„ <strong>â€˜ê°™ì€ ê³µê°„â€™ì— ë‘ê³  ì—°ì‚°ì„ í•˜ëŠ” ê²ƒ</strong>ì´ ì¤‘ìš”í•˜ê¸°ì— ê³µê°„ì— ëŒ€í•œ ì´í•´ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>

<h3 id="model-matrix">Model Matrix</h3>
<p>(Object Space -&gt; World Space)</p>
<blockquote>
  <p><strong>ì—¬ëŸ¬ ë¬¼ì²´ë¥¼ í•˜ë‚˜ì˜ ì„¸ìƒì„ ê¸°ì¤€ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ê²ƒ.</strong></p>
</blockquote>

<p><img src="/assets/images/Graphics/2021-02-07-SpaceTransform/01.png" alt="01" /></p>
<center>(Model Matrix Result) </center>
<p><br /></p>

<ul>
  <li>Object Space : ë¬¼ì²´ì˜ ì¤‘ì‹¬ì„ ì›ì ìœ¼ë¡œ í•˜ëŠ” ê³µê°„. <strong>ë¬¼ì²´ë§ˆë‹¤ ìì‹ ì˜ ì›ì ì´ ë‹¤ë¥´ë‹¤.</strong></li>
  <li>World Space : ì„¸ìƒ(Scene)ì˜ ì¤‘ì‹¬ì„ ì›ì ìœ¼ë¡œ í•˜ëŠ” ê³µê°„. <strong>ë¬¼ì²´ê°€ ì—¬ëŸ¬ ê°œë¼ë„ ì„¸ìƒì˜ ì›ì ì€ í•˜ë‚˜.</strong></li>
</ul>

<p>ê°„ë‹¨íˆ 2D Spaceì—ì„œ ì˜ˆë¥¼ ë“¤ë©´,<br />
Object Space ê¸°ì¤€ ì¢Œí‘œëŠ” &lt;x,y&gt; ë¡œ í‘œí˜„í•˜ê³  World Space ê¸°ì¤€ ì¢Œí‘œëŠ” (x,y)ë¡œ í‘œí˜„í•œë‹¤ê³  í•  ë•Œ,
ëª¨ë¸ ìœ„ì˜ ì  p &lt;1,0&gt;ê°€ ìˆê³ , ëª¨ë¸ì€ World Space ê¸°ì¤€ìœ¼ë¡œ (2,2)ì— ìˆìœ¼ë©´.</p>

<p><img src="/assets/images/Graphics/2021-02-07-SpaceTransform/02.png" alt="02" /></p>
<center>(Model vs World) </center>
<p><br /></p>

<ul>
  <li>World ê¸°ì¤€ p ì˜ ì¢Œí‘œ -&gt; &lt;1,0&gt; + (2, 2) = <strong>(3,2)</strong></li>
  <li>Object ê¸°ì¤€ pì˜ ì¢Œí‘œ -&gt; &lt;1,0&gt; = <strong>&lt;1,0&gt;</strong></li>
</ul>

<h4 id="model-matrix-example">Model Matrix Example</h4>

<p>ë³´í†µ Model MatrixëŠ” <strong>TRS Matrix</strong>ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. (Translate, Rotation, Scale Matrix)</p>

<p>ê²°êµ­ <strong>Modelì˜ World ê¸°ì¤€ ìœ„ì¹˜, íšŒì „ ì •ë„, í¬ê¸°ëŠ” ì„¤ì •í•˜ê¸° ë‚˜ë¦„ì…ë‹ˆë‹¤.</strong><br />
Modelì´ ì„¸ìƒì˜ ì¤‘ì‹¬ì— ê·¸ëŒ€ë¡œ ìˆë‹¤ê³  í•˜ê³  ì‹¶ìœ¼ë©´ TRSë¥¼ ë‹¨ìœ„í–‰ë ¬ë¡œ ë§Œë“¤ì–´ì„œ ë³´ë‚´ì£¼ë©´ ë˜ëŠ” ê²ƒì´ê³ , &lt;2,0,0&gt; ìœ„ì¹˜ì— ë‘ê³  ì‹¶ë‹¤ í•˜ë©´ Translateë¥¼ &lt;2,0,0&gt; í•´ì£¼ë©´ ë©ë‹ˆë‹¤.<br />
<strong>ì¹´ë©”ë¼ì— ëª¨ë¸ë“¤ì´ ì–´ë–»ê²Œ ë¹„ì¶°ì§ˆ ì§€ë¥¼ ìƒê°í•´ì„œ, ì¹´ë©”ë¼ì™€ ëª¨ë¸ë“¤ì˜ World ìœ„ì¹˜ë¥¼ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.</strong></p>

<p><strong>Translate</strong><br />
ì°¸ê³  : <a href="https://solarianprogrammer.com/2013/05/22/opengl-101-matrices-projection-view-model/">https://solarianprogrammer.com/2013/05/22/opengl-101-matrices-projection-view-model/</a><br />
<img src="/assets/images/Graphics/2021-02-07-SpaceTransform/03.png" alt="03" /></p>
<center>(Translate Matrix) </center>
<p><br /></p>

<p><strong>Rotation</strong><br />
<img src="/assets/images/Graphics/2021-02-07-SpaceTransform/04.png" alt="04" /></p>
<center>(Rotation Matrix) </center>
<p><br /></p>

<p><strong>Scale</strong><br />
<img src="/assets/images/Graphics/2021-02-07-SpaceTransform/05.png" alt="05" /></p>
<center>(Scale Matrix) </center>
<p><br /></p>

<h3 id="view-matrix">View Matrix</h3>
<p>(World Space -&gt; View Space)</p>
<blockquote>
  <p><strong>ì„¸ìƒì„ ì¹´ë©”ë¼ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°”ë¼ë³´ëŠ” ê²ƒ.</strong></p>
</blockquote>

<p><img src="/assets/images/Graphics/2021-02-07-SpaceTransform/07.png" alt="07" /></p>
<center>(View Matrix Result) </center>
<p><br /></p>

<p>ë‹¤ë¥¸ ë§ë¡œëŠ”, ì„¸ìƒì„ ê¸°ì¤€ìœ¼ë¡œ í‘œí˜„ëœ ì •ì ë“¤ì„ Cameraë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‹¤ì‹œ í‘œí˜„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë˜í•œ View MatrixëŠ” Camera Matrixë¼ê³ ë„ í•˜ê³  View SpaceëŠ” Camera Spaceë¼ê³ ë„ í•©ë‹ˆë‹¤.</p>

<p>ì´ê±¸ ì§ê´€ì ìœ¼ë¡œ í‘œí˜„í•˜ë©´, â€˜Worldâ€™ì˜ ì›ì ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ì˜ëœ Vertex ë“¤ì„, â€˜Cameraâ€™ì˜ ì›ì ì„ ê¸°ì¤€ìœ¼ë¡œ ì¬ì •ì˜ í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.<br />
ì´ë¥¼ ì˜ ìƒê°í•´ë³´ë©´, <strong>â€˜Cameraâ€™ì˜ Model Matrix</strong>ì™€ <strong>View Matrixì˜ ê´€ê³„</strong>ë¥¼ ìƒê°í•´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<ul>
  <li><strong>Cameraì˜ Model Matrix</strong> : Camera ê¸°ì¤€ì˜ ì¢Œí‘œë¥¼ World Spaceë¡œ ì˜®ê¹€.</li>
  <li><strong>View Matrix</strong> : World Space ì¢Œí‘œë¥¼ Camera ê¸°ì¤€ìœ¼ë¡œ ë°”ê¿ˆ.</li>
  <li><strong>ê²°ë¡  : Inverse(Cameraì˜ Model Matrix) = View Matrix</strong></li>
</ul>

<p>ì°¸ê³  : <a href="https://www.3dgep.com/understanding-the-view-matrix/#Converting_between_Camera_Transformation_Matrix_and_View_Matrix">https://www.3dgep.com/understanding-the-view-matrix/#Converting_between_Camera_Transformation_Matrix_and_View_Matrix</a></p>

<p><img src="/assets/images/Graphics/2021-02-07-SpaceTransform/06.png" alt="06" /></p>
<center>(Cameraì˜ Model Matrixì™€ View Matrixì˜ ê´€ê³„) </center>
<p><br /></p>

<p>(ì°¸ê³ ë¡œ Cameraì˜ Model Matrixì˜ SëŠ” ì˜ë¯¸ê°€ ì—†ìœ¼ë¯€ë¡œ ì¹´ë©”ë¼ì˜ ìœ„ì¹˜, íšŒì „ë§Œ ê³ ë ¤í•˜ë©´ ë©ë‹ˆë‹¤.)</p>

<h4 id="look-at-matrix">Look At Matrix</h4>

<p>View Matrixë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ìì£¼ì“°ì´ëŠ” ê°œë…ì´ <strong>LookAt</strong> ì…ë‹ˆë‹¤.<br />
ì£¼ë¡œ 2~3ê°€ì§€ ì…ë ¥ì„ ë°›ìŠµë‹ˆë‹¤.</p>

<ol>
  <li><strong>íšŒì „</strong>ë§Œ ë³€ê²½í•˜ëŠ” ê²½ìš° (Camera ê°ì²´ì— í˜¸ì¶œ í•¨ìˆ˜ë¡œ ì œê³µë˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.)
    <ol>
      <li>forward vector</li>
      <li>up vector</li>
    </ol>
  </li>
  <li><strong>íšŒì „</strong>ê³¼ <strong>ìœ„ì¹˜</strong> ëª¨ë‘ ë³€ê²½í•˜ëŠ” ê²½ìš° (glmì˜ Look Atì´ ì´ ë°©ì‹ì…ë‹ˆë‹¤.)
    <ol>
      <li>ì¹´ë©”ë¼ì˜ ìœ„ì¹˜</li>
      <li>forward vector</li>
      <li>up vector</li>
    </ol>
  </li>
</ol>

<h3 id="projection-matrix">Projection Matrix</h3>
<p>(View Space -&gt; Clip Space (NDC Space))</p>
<blockquote>
  <p><strong>ì¹´ë©”ë¼ì˜ ì‹œì•¼ê°, ì›ê·¼ë²• ì ìš© ì—¬ë¶€ ë“±ì„ ì ìš©.</strong></p>
</blockquote>

<p><img src="/assets/images/Graphics/2021-02-07-SpaceTransform/08.png" alt="08" /></p>
<center>(Projection Matrix) </center>
<p><br /></p>

<p>ì°¸ê³  : <a href="https://stackoverflow.com/questions/21841598/when-does-the-transition-from-clip-space-to-screen-coordinates-happen">https://stackoverflow.com/questions/21841598/when-does-the-transition-from-clip-space-to-screen-coordinates-happen</a></p>

<p>Clip Spaceì™€ NDC SpaceëŠ” ë‹¤ë¦…ë‹ˆë‹¤. Clip SpaceëŠ” 4ì°¨ì›ì˜ ê³µê°„ì´ê³  <strong>Clip Spaceì˜ x,y,zë¥¼ ê°ê° wë¡œ ë‚˜ëˆˆ ê²ƒì´ NDC Spaceì…ë‹ˆë‹¤.</strong><br />
ë‹¤ë¥¸ ì˜ê²¬ìœ¼ë¡œëŠ”, ë‘ ê³µê°„ì€ ê°œë…ì ìœ¼ë¡œ ê°™ì€ ê³µê°„ì´ì§€ë§Œ í‘œí˜„ ë°©ì‹ë§Œ ë‹¬ë¦¬í•œ ê²ƒì´ë¼ëŠ” ì˜ê²¬ë„ ìˆìŠµë‹ˆë‹¤. (Homogeneous coord (4ì°¨ì›), Cartesian coord (3ì°¨ì›))</p>

<p><strong>NDC ê³µê°„ì€ x,y,z ëª¨ë‘ [-1, 1]ì˜ ë²”ìœ„ì˜ unit cube ê³µê°„</strong>ì…ë‹ˆë‹¤. ì¬ë¯¸ìˆëŠ” ê²ƒì€ NDC ê³µê°„ì€ DirectXì—ì„œëŠ” z ë²”ìœ„ê°€ [0,1] ì…ë‹ˆë‹¤. (ì´ë ‡ê²Œ í•˜ë©´ z-fighting ê³¼ ê°™ì€ issueì—ì„œ ì´ë“ì„ ì–»ì„ ìˆ˜ ìˆë‹¤ê³  í•©ë‹ˆë‹¤. (<a href="https://gamedev.stackexchange.com/questions/29018/why-does-opengl-require-all-coordinates-in-1-1-ndc/29020">https://gamedev.stackexchange.com/questions/29018/why-does-opengl-require-all-coordinates-in-1-1-ndc/29020</a>)<br />
OpenGLë„ 4.3 ì´ í›„ ë¶€í„°ëŠ” ì„¤ì •ì„ í†µí•´ z ë²”ìœ„ë¥¼ [0,1]ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h4 id="perspective-vs-orthogonal">Perspective vs Orthogonal</h4>

<p>ê²°êµ­ Projection Matrixì—ì„œ ì¤‘ìš”í•œ ê±´ Projection ë°©ì‹ì…ë‹ˆë‹¤.<br />
Projection MatrixëŠ” í¬ê²Œ ë‘ ê°œë¡œ ë‚˜ë‰©ë‹ˆë‹¤.</p>
<ul>
  <li><strong>Perspective</strong> : ì›ê·¼ë²• ì ìš©</li>
  <li><strong>Othogonal</strong> : ì›ê·¼ë²• ì ìš©í•˜ì§€ ì•ŠìŒ.</li>
</ul>

<p>ë˜í•œ Projection Matrixë¥¼ ë§Œë“œëŠ” ë°©ë²•ë„ ë‹¤ì–‘í•œë°</p>
<ol>
  <li><strong>near, far, right, left, bottom, top</strong> ìœ¼ë¡œ êµ¬í•˜ëŠ” ë°©ë²•</li>
  <li><strong>fov_width, fov_height, near, far</strong>ë¡œ êµ¬í•˜ëŠ” ë°©ë²•</li>
  <li><strong>fov, aspect, near, far</strong>ë¡œ êµ¬í•˜ëŠ” ë°©ë²•</li>
</ol>

<p>ë“±ì´ ìˆìŠµë‹ˆë‹¤.</p>

<p><strong>Perspective Projection</strong><br />
ì°¸ê³  :<br />
<a href="https://en.wikibooks.org/wiki/GLSL_Programming/Vertex_Transformations">https://en.wikibooks.org/wiki/GLSL_Programming/Vertex_Transformations</a>
<a href="https://gamedev.stackexchange.com/questions/120338/what-does-a-perspective-projection-matrix-look-like-in-opengl">https://gamedev.stackexchange.com/questions/120338/what-does-a-perspective-projection-matrix-look-like-in-opengl</a></p>

<ul>
  <li>near, far, right, left, bottom, top ìœ¼ë¡œ êµ¬í•˜ëŠ” ë°©ë²•
<img src="/assets/images/Graphics/2021-02-07-SpaceTransform/11.png" alt="11" /></li>
</ul>
<center>(near, far, right, left, bottom, top) </center>
<p><br /></p>

<ul>
  <li>fov_width, fov_height, near, farë¡œ êµ¬í•˜ê¸°<br />
<img src="/assets/images/Graphics/2021-02-07-SpaceTransform/10.png" alt="10" /></li>
</ul>
<center>(fob_w, fov_h, near, far) </center>
<p><br />
(cot ì€ tangentì˜ ì—­ìˆ˜ ì…ë‹ˆë‹¤.)</p>

<ul>
  <li>fov, aspect, near, farë¡œ êµ¬í•˜ëŠ” ë°©ë²•<br />
<img src="/assets/images/Graphics/2021-02-07-SpaceTransform/12.png" alt="12" /></li>
</ul>
<center>(fob, aspect, near, far) </center>
<p><br /></p>

<p><strong>Orthogonal Projection</strong></p>

<ul>
  <li>near, far, right, left, bottom, top ìœ¼ë¡œ êµ¬í•˜ëŠ” ë°©ë²•
<img src="/assets/images/Graphics/2021-02-07-SpaceTransform/13.png" alt="13" /></li>
</ul>
<center>(near, far, right, left, bottom, top) </center>
<p><br /></p>

<h3 id="ì •ë¦¬">ì •ë¦¬</h3>

<p><img src="/assets/images/Graphics/2021-02-07-SpaceTransform/09.png" alt="09" /></p>
<center>(ì „ì²´ ë³€í™˜ ê³¼ì •) </center>
<p><br /></p>

<p><a href="https://en.wikibooks.org/wiki/GLSL_Programming/Vertex_Transformations">https://en.wikibooks.org/wiki/GLSL_Programming/Vertex_Transformations</a></p>
:ET